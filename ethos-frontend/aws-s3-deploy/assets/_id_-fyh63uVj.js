import{k as u,r as a,h as j,j as e,a as f}from"./index-CxzMjhE-.js";import{a as h}from"./post-BFgSlzkn.js";const m="/projects",p=async()=>(await u.get(m)).data,y=async s=>(await u.get(`${m}/${s}`)).data,b=s=>{const[t,n]=a.useState(null),[l,o]=a.useState(null),[i,r]=a.useState(!!s);a.useEffect(()=>{if(!s)return;(async()=>{r(!0);try{const x=await y(s);n(x)}catch(x){o("Failed to load project"),console.error("[useProject] Failed to load project:",x)}finally{r(!1)}})()},[s]);const d=a.useCallback(async()=>{try{return await p()}catch(c){return console.error("[useProject] Failed to fetch projects:",c),[]}},[]);return{project:t,error:l,isLoading:i,getAllProjects:d}},N=()=>{const{id:s}=j(),{project:t,error:n,isLoading:l}=b(s??""),[o,i]=a.useState([]);return a.useEffect(()=>{(async()=>{if(!t)return;const d=await Promise.all((t.deliverables||[]).map(c=>h(c).catch(()=>null)));i(d.filter(Boolean))})()},[t]),n?e.jsx("div",{className:"p-6 text-center text-red-500",children:"Project not found."}):l||!t?e.jsx(f,{}):e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-10 space-y-12 bg-soft dark:bg-soft-dark text-primary",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.title}),e.jsx("p",{children:t.description}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Project Map"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded",children:JSON.stringify(t.mapEdges||[],null,2)})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Deliverables"}),o.length>0?o.map(r=>e.jsx("div",{className:"border p-2 mb-2 rounded",children:r.title||r.id},r.id)):e.jsx("p",{className:"text-sm text-secondary",children:"No deliverables yet."})]})]})};export{N as default};
