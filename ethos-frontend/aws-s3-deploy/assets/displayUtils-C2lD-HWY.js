import{R as u}from"./index-CxzMjhE-.js";const k=e=>e.replace(/\b([a-z])/g,l=>l.toUpperCase()),T={quest:"Quest"},y=(e,l,d=!1)=>{var r;let i="Q";l!==void 0&&(i+=":",d&&l&&(i+=l));let a=((r=e.nodeId)==null?void 0:r.trim())||"";a.startsWith("Q:")&&(a=a.split(":").slice(2).join(":"));const s=e.id.slice(-4),c=e.type==="log"||e.type==="quest_log",I=e.type==="task"||e.type==="issue";return c?a?`${i}:${a}`:`${i}:L${s}`:I&&a?`${i}:${a}`:`${i}:${s}`},b=(e,l,d=!1)=>{var s;if(e.nodeId||e.questId)return y(e,l,d);const i=((s=e.content)==null?void 0:s.trim())||"",a=i.length>50?i.slice(0,50)+"â€¦":i;return k(a)},S=(e,l,d)=>{var c,I,r,m,L,f;const i=[],a=l||e.questTitle,s=(e.linkedItems||[]).length>1;if(e.type==="review"){const t=((c=e.author)==null?void 0:c.username)||e.authorId;return i.push({type:"review",label:a?`Review: ${a}`:"Review",detailLink:e.id?u.POST(e.id):void 0,username:t,usernameLink:u.PUBLIC_PROFILE(e.authorId)}),e.subtype&&i.push({type:"category",label:e.subtype,detailLink:u.POST(e.id)}),i}if(e.type==="request"){let t="Request";if(e.questId&&a){if(e.subtype==="task"){const n=e.nodeId?y(e,"",!1):void 0;t=n?`Task Request - ${n}`:"Task Request"}else if(e.subtype==="issue"){const n=e.nodeId?y(e,"",!1):void 0;t=n?`Issue Request - ${n}`:"Issue Request"}else if(e.subtype==="party"){const n=e.nodeId?y(e,"",!1):void 0;t=n?`Party Request - ${n}`:"Party Request";const h=((I=e.author)==null?void 0:I.username)||e.authorId;return i.push({type:"party_request",label:t,detailLink:u.POST(e.id),username:h,usernameLink:u.PUBLIC_PROFILE(e.authorId)}),e.status&&e.status!=="To Do"&&i.push({type:"status",label:e.status,detailLink:u.POST(e.id)}),i}else t="Request - Quest";i.push({type:"request",label:t,detailLink:u.POST(e.id)})}else{const n=((r=e.author)==null?void 0:r.username)||e.authorId;i.push({type:"request",label:t,detailLink:u.POST(e.id),username:n,usernameLink:u.PUBLIC_PROFILE(e.authorId)})}return e.status&&e.status!=="To Do"&&i.push({type:"status",label:e.status,detailLink:u.POST(e.id)}),i}if(!s&&a&&i.push({type:"quest",label:`Quest: ${a}`,link:d||e.questId?u.QUEST(d||e.questId):void 0}),e.type==="task"&&e.nodeId){const t=e.nodeId.replace(/^Q:[^:]+:/,"");i.push({type:"task",label:t,detailLink:u.POST(e.id)})}else if(e.type==="issue"){const t=e.nodeId&&!s?e.nodeId.replace(/^Q:[^:]+:/,""):"Issue";i.push({type:"issue",label:t,detailLink:u.POST(e.id)})}else if(e.type==="log"||e.type==="quest_log"){const t=((m=e.author)==null?void 0:m.username)||e.authorId,n=e.nodeId&&!s?`Log - ${y(e,a??"",!1)}`:"Log";i.push({type:"log",label:n,detailLink:u.POST(e.id),username:t,usernameLink:u.PUBLIC_PROFILE(e.authorId)})}else if(e.type==="commit"){const t=((L=e.author)==null?void 0:L.username)||e.authorId,n=e.nodeId&&!s?`Commit - Q::${e.nodeId.replace(/^Q:[^:]+:/,"")}`:"Commit";i.push({type:"commit",label:n,detailLink:u.POST(e.id),username:t,usernameLink:u.PUBLIC_PROFILE(e.authorId)})}else e.type==="meta_system"?i.push({type:"meta_system",label:"System",detailLink:u.POST(e.id)}):e.type==="meta_announcement"?i.push({type:"meta_announcement",label:"Announcement",detailLink:u.POST(e.id)}):e.type==="solved"&&i.push({type:"solved",label:"Solved",detailLink:u.POST(e.id)});if(e.status&&["task","issue"].includes(e.type)&&i.push({type:"status",label:e.status,detailLink:u.POST(e.id)}),e.type==="free_speech"){const t=((f=e.author)==null?void 0:f.username)||e.authorId;i.push({type:"free_speech",label:`Free Speech: @${t}`,link:u.PUBLIC_PROFILE(e.authorId)})}return i.filter((t,n)=>i.findIndex(h=>h.label===t.label&&h.type===t.type)===n)};export{T as P,y as a,S as b,b as g,k as t};
